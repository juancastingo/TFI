@model IEnumerable<TFITest4.Models.ModelUsuario>
@using TFITest4.Resources

<script type="text/javascript">
    tipoUserGroup = document.getElementById('LoginExiste').getAttribute("data-val");
    console.log(tipoUserGroup);
    if (tipoUserGroup != "Comercial" && tipoUserGroup != "Administrador") {
        window.location = "/Login/Error"
    }
</script>

<h2 class="titulo">@Language.usuario</h2>

<p>
    @Html.ActionLink("Create New", "RegisterIn", new {} ,new { @class = "btn btn-primary", @style = "color:white" }) 
</p>
<table class="table tableJquery table-bordered dt-responsive table-striped" cellspacing="0" width="100%">
    <thead>
    <tr>
        <th>
            @Language.codigo
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Nombre)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Usuario1)
        </th>
        <th>
            @Language.estado
        </th>
        <th>
                @Language.empresa
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Telefono)
        </th>
        <th>
            @Language.fechaAlta
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IDTipoUsuario)
        </th>
        <th>@Language.action</th>
    </tr>
        </thead>
    <tbody>

@foreach (var item in Model) {
    <tr>
        <td style="text-align: right">
            @Html.DisplayFor(modelItem => item.IDUsuario)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Nombre)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Usuario1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EstadoMisc.Detalle)
        </td>
        <td>
            @if (item.ClienteEmpresa != null) {
                 @Html.DisplayFor(modelItem => item.ClienteEmpresa.Nombre)
            } else {
               <span>Usuario Local</span>
            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Telefono)
        </td>
        <td>
            @item.FechaAlta.ToString("dd/MMM/yyyy HH:mm")
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TipoUsuario.Tipo)
        </td>
        <td>
            @Html.ActionLink(@Language.editar, "Edit", new {  id=item.IDUsuario },  new { @class = "btn btn-primary", @style = "color:white" })
        </td>
    </tr>
}
        </tbody>
</table>
